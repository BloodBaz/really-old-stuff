	.data
	.globl	__backg1_pal
__backg1_pal:
	.dc.w	1124
	.dc.w	2728
	.dc.w	3240
	.dc.w	3242
	.dc.w	2762
	.dc.w	3274
	.dc.w	2762
	.dc.w	3276
	.dc.w	2764
	.dc.w	2796
	.dc.w	2764
	.dc.w	2764
	.dc.w	3308
	.dc.w	2764
	.dc.w	3276
	.dc.w	3308
	.globl	__backg2_pal
__backg2_pal:
	.dc.w	0
	.dc.w	0
	.dc.w	0
	.dc.w	0
	.dc.w	0
	.dc.w	2
	.dc.w	2
	.dc.w	546
	.dc.w	516
	.dc.w	1092
	.dc.w	8
	.dc.w	1096
	.dc.w	1638
	.dc.w	1672
	.dc.w	2186
	.dc.w	3822
	.globl	__backg3_pal
__backg3_pal:
	.dc.w	514
	.dc.w	546
	.dc.w	546
	.dc.w	546
	.dc.w	1058
	.dc.w	1060
	.dc.w	1092
	.dc.w	1092
	.dc.w	1092
	.dc.w	1092
	.dc.w	1604
	.dc.w	1604
	.dc.w	1638
	.dc.w	2150
	.dc.w	2184
	.dc.w	2732
	.globl	__backg4_pal
__backg4_pal:
	.dc.w	0
	.dc.w	2
	.dc.w	6
	.dc.w	8
	.dc.w	1024
	.dc.w	512
	.dc.w	1536
	.dc.w	2560
	.dc.w	32
	.dc.w	128
	.dc.w	68
	.dc.w	136
	.dc.w	512
	.dc.w	1536
	.dc.w	1090
	.dc.w	3274
	.globl	__backm1_pal
__backm1_pal:
	.dc.w	546
	.dc.w	548
	.dc.w	1092
	.dc.w	1604
	.dc.w	1604
	.dc.w	1604
	.dc.w	1604
	.dc.w	2116
	.dc.w	1094
	.dc.w	2150
	.dc.w	618
	.dc.w	1674
	.dc.w	2696
	.dc.w	2698
	.dc.w	3244
	.dc.w	3244
	.globl	__backm2_pal
__backm2_pal:
	.dc.w	0
	.dc.w	546
	.dc.w	1092
	.dc.w	2692
	.dc.w	3202
	.dc.w	3236
	.dc.w	3238
	.dc.w	3240
	.dc.w	2730
	.dc.w	3242
	.dc.w	3786
	.dc.w	3276
	.dc.w	3820
	.dc.w	3822
	.dc.w	3822
	.dc.w	3822
	.globl	__backm3_pal
__backm3_pal:
	.dc.w	34
	.dc.w	1602
	.dc.w	3584
	.dc.w	3138
	.dc.w	194
	.dc.w	1220
	.dc.w	3236
	.dc.w	3238
	.dc.w	12
	.dc.w	1162
	.dc.w	3240
	.dc.w	3276
	.dc.w	236
	.dc.w	1772
	.dc.w	3820
	.dc.w	3822
	.globl	__backm4_pal
__backm4_pal:
	.dc.w	0
	.dc.w	32
	.dc.w	4
	.dc.w	548
	.dc.w	1092
	.dc.w	1092
	.dc.w	1604
	.dc.w	1638
	.dc.w	582
	.dc.w	584
	.dc.w	1128
	.dc.w	1164
	.dc.w	2150
	.dc.w	1638
	.dc.w	2150
	.dc.w	2730
	.globl	_fractal_icy_pal
_fractal_icy_pal:
	.dc.w	1536
	.dc.w	1568
	.dc.w	2080
	.dc.w	2114
	.dc.w	2626
	.dc.w	2658
	.dc.w	3172
	.dc.w	3204
	.dc.w	3716
	.dc.w	3750
	.dc.w	3782
	.dc.w	3784
	.dc.w	3786
	.dc.w	3818
	.dc.w	3820
	.dc.w	3822
	.globl	_fractal_grn_pal
_fractal_grn_pal:
	.dc.w	512
	.dc.w	544
	.dc.w	1056
	.dc.w	1088
	.dc.w	1600
	.dc.w	1632
	.dc.w	2144
	.dc.w	2176
	.dc.w	2688
	.dc.w	2722
	.dc.w	3236
	.dc.w	3270
	.dc.w	3784
	.dc.w	3818
	.dc.w	3820
	.dc.w	3822
	.globl	_fractal_fir_pal
_fractal_fir_pal:
	.dc.w	2
	.dc.w	4
	.dc.w	6
	.dc.w	8
	.dc.w	10
	.dc.w	12
	.dc.w	14
	.dc.w	46
	.dc.w	78
	.dc.w	110
	.dc.w	142
	.dc.w	174
	.dc.w	206
	.dc.w	238
	.dc.w	750
	.dc.w	1262
	.globl	_fractal_yel_pal
_fractal_yel_pal:
	.dc.w	2
	.dc.w	34
	.dc.w	36
	.dc.w	68
	.dc.w	70
	.dc.w	102
	.dc.w	104
	.dc.w	136
	.dc.w	138
	.dc.w	682
	.dc.w	1196
	.dc.w	1740
	.dc.w	2254
	.dc.w	2798
	.dc.w	3310
	.dc.w	3822
	.globl	_frac_pals
_frac_pals:
	.dc.l	_fractal_icy_pal
	.dc.l	_fractal_grn_pal
	.dc.l	_fractal_fir_pal
	.dc.l	_fractal_yel_pal
	.globl	_frac_til
_frac_til:
	.dc.l	262144
	.dc.l	274880
	.dc.l	277120
	.dc.l	304160
	.dc.l	306400
	.dc.l	323776
	.dc.l	326016
	.dc.l	338112
	.dc.l	340352
	.dc.l	369792
	.dc.l	372032
	.dc.l	395712
	.dc.l	397952
	.dc.l	427072
	.dc.l	429312
	.dc.l	448832
	.globl	_frac_map
_frac_map:
	.dc.l	274880
	.dc.l	304160
	.dc.l	323776
	.dc.l	338112
	.dc.l	369792
	.dc.l	395712
	.dc.l	427072
	.dc.l	448832
	.data
	.globl	_pic_pals
_pic_pals:
	.dc.l	__backg1_pal
	.dc.l	__backg2_pal
	.dc.l	__backg3_pal
	.dc.l	__backg4_pal
	.globl	_pic_til_addrs
_pic_til_addrs:
	.dc.l	493008
	.dc.l	910
	.dc.l	524368
	.dc.l	978
	.dc.l	557904
	.dc.l	884
	.dc.l	588432
	.dc.l	836
	.globl	_pic_map_addrs
_pic_map_addrs:
	.dc.l	522128
	.dc.l	555664
	.dc.l	586192
	.dc.l	615184
	.text
	.globl	_draw_fractal_bkg
_draw_fractal_bkg:
	link	a6,#0
	movem.l	d3/d4/d5/d6/a3/a4/a5,-(sp)
	move.w	8(a6),d6
	move.w	10(a6),d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_frac_pals,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	clr.w	-(sp)
	jsr	_set_colors
	addq.w	#6,sp
	move.w	#16384,d3
	move.w	d6,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_frac_til,d1
	move.l	d1,a0
	move.l	(a0),a5
L3:
	move.w	d6,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_frac_til,d1
	move.l	d1,a0
	cmp.l	4(a0),a5
	bcc	L5
	move.w	#1024,-(sp)
	move.w	d3,-(sp)
	move.l	a5,-(sp)
	jsr	_dma_vram_copy
	addq.w	#8,sp
	add.w	#1024,d3
	lea	1024(a5),a5
	bra	L3
L5:
	move.w	d6,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_frac_map,d1
	move.l	d1,a0
	move.l	(a0),a5
	moveq.l	#0,d3
L6:
	cmp.w	#28,d3
	beq	L2
	move.w	d3,d0
	mulu	_extWIDTH,d0
	lsl.w	#1,d0
	add.w	#57344,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d1,d5
	move.l	#12582916,a3
	move.l	d5,d0
	and.l	#16383,d0
	add.l	#16384,d0
	moveq.l	#16,d1
	lsl.l	d1,d0
	move.l	d5,d1
	moveq.l	#14,d2
	lsr.l	d2,d1
	add.l	d1,d0
	move.l	d0,(a3)
	move.l	#12582912,a4
	moveq.l	#0,d4
L9:
	cmp.w	#40,d4
	beq	L7
	move.w	(a5)+,d0
	add.w	#512,d0
	move.w	d0,(a4)
	addq.w	#1,d4
	bra	L9
L7:
	addq.w	#1,d3
	bra	L6
L2:
	movem.l	(sp)+,d3/d4/d5/d6/a3/a4/a5
	unlk	a6
	rts
	.data
	.globl	_mis_pals
_mis_pals:
	.dc.l	__backm1_pal
	.dc.l	__backm2_pal
	.dc.l	__backm3_pal
	.dc.l	__backm4_pal
	.globl	_mis_til_addrs
_mis_til_addrs:
	.dc.l	617424
	.dc.l	972
	.dc.l	650768
	.dc.l	987
	.dc.l	684592
	.dc.l	992
	.dc.l	718576
	.dc.l	1001
	.globl	_mis_map_addrs
_mis_map_addrs:
	.dc.l	648528
	.dc.l	682352
	.dc.l	716336
	.dc.l	750608
	.text
	.globl	_draw_picture_bkg
_draw_picture_bkg:
	link	a6,#-2
	move.l	d3,-(sp)
	move.w	8(a6),d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_pic_pals,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	clr.w	-(sp)
	jsr	_set_colors
	addq.w	#6,sp
	move.w	8(a6),d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_pic_til_addrs,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	8(a6),d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_pic_til_addrs,d1
	move.l	d1,a0
	move.w	6(a0),-(sp)
	move.w	#512,-(sp)
	jsr	_set_bkg_data
	addq.w	#8,sp
	move.w	#512,-(sp)
	move.w	#57344,-(sp)
	move.w	8(a6),d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_pic_map_addrs,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	#28,-(sp)
	move.w	#40,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_set_bkg_tiles
	lea	16(sp),sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollh
	addq.w	#4,sp
	moveq.l	#1,d3
L15:
	cmp.w	#81,d3
	beq	L17
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	move.w	#-32,-(sp)
	move.w	d3,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	addq.w	#1,d3
	bra	L15
L17:
	move.w	#80,-(sp)
	move.w	#1,-(sp)
	jsr	_show_sprite
	addq.w	#4,sp
	move.l	(sp)+,d3
	unlk	a6
	rts
	.data
	.text
	.globl	_draw_mission_bkg
_draw_mission_bkg:
	link	a6,#-2
	move.l	d3,-(sp)
	move.w	8(a6),d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_mis_til_addrs,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	8(a6),d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_mis_til_addrs,d1
	move.l	d1,a0
	move.w	6(a0),-(sp)
	move.w	#512,-(sp)
	jsr	_set_bkg_data
	addq.w	#8,sp
	move.w	#512,-(sp)
	move.w	#57344,-(sp)
	move.w	8(a6),d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_mis_map_addrs,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	#28,-(sp)
	move.w	#40,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_set_bkg_tiles
	lea	16(sp),sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollh
	addq.w	#4,sp
	clr.w	-(sp)
	move.w	8(a6),d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_mis_pals,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_fade_in
	addq.w	#6,sp
	moveq.l	#1,d3
L21:
	cmp.w	#81,d3
	beq	L23
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	move.w	#-32,-(sp)
	move.w	d3,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	addq.w	#1,d3
	bra	L21
L23:
	move.w	#80,-(sp)
	move.w	#1,-(sp)
	jsr	_show_sprite
	addq.w	#4,sp
	move.l	(sp)+,d3
	unlk	a6
	rts
