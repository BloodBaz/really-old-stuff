	.data
	.text
	.globl	_draw_playfield
_draw_playfield:
	link	a6,#-8
	movem.l	d3/d4/d5/d6/d7/a3/a4,-(sp)
	move.l	8(a6),d7
	move.l	d7,a0
	tst.b	569(a0)
	beq	L3
	move.l	d7,a0
	move.w	420(a0),d0
	mulu	_extWIDTH,d0
	move.l	d7,a0
	add.w	422(a0),d0
	lsl.w	#1,d0
	add.w	#49152,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d1,d6
	moveq.l	#0,d3
L4:
	move.l	d7,a0
	cmp.w	426(a0),d3
	beq	L6
	move.l	#12582916,a3
	move.l	d6,d0
	and.l	#16383,d0
	add.l	#16384,d0
	moveq.l	#16,d1
	lsl.l	d1,d0
	move.l	d6,d1
	moveq.l	#14,d2
	lsr.l	d2,d1
	add.l	d1,d0
	move.l	d0,(a3)
	move.l	#12582912,a4
	moveq.l	#0,d4
L7:
	move.l	d7,a0
	cmp.w	424(a0),d4
	beq	L9
	moveq.l	#14,d0
	mulu	d3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	add.l	d1,a0
	moveq.l	#0,d0
	move.w	d4,d0
	move.b	0(a0,d0.l),d5
	ext.w	d5
	beq	L10
	move.w	d5,d0
	subq.w	#1,d0
	or.w	#256,d0
	or.w	#8192,d0
	move.w	d0,(a4)
L8:
	addq.w	#1,d4
	bra	L7
L10:
	move.w	#0,(a4)
	bra	L8
L9:
	move.w	_extWIDTH,d0
	add.w	_extWIDTH,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	d1,d6
	addq.w	#1,d3
	bra	L4
L6:
	move.l	d7,a0
	tst.w	566(a0)
	beq	L13
	move.l	d7,a0
	cmp.w	#140,566(a0)
	bhi	L13
	move.w	_curr_language,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__game_over_str,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	move.l	d7,a0
	move.w	424(a0),d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,d3
	move.l	d7,a0
	move.w	426(a0),d0
	lsr.w	#1,d0
	move.l	d7,a0
	add.w	420(a0),d0
	subq.w	#1,d0
	move.w	d0,d4
	move.w	_curr_language,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__game_over_str,d1
	move.l	d1,a0
	move.l	(a0),(sp)
	move.w	#49152,-(sp)
	move.w	#1,-(sp)
	move.w	d4,-(sp)
	move.l	d7,a0
	move.w	422(a0),d0
	add.w	d3,d0
	move.w	d0,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.w	_curr_language,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__game_over_str,d1
	move.l	d1,a0
	move.l	4(a0),-(sp)
	jsr	_strlen2
	move.l	d7,a0
	move.w	424(a0),d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,d3
	addq.w	#1,d4
	move.w	_curr_language,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__game_over_str,d1
	move.l	d1,a0
	move.l	4(a0),(sp)
	move.w	#49152,-(sp)
	move.w	#1,-(sp)
	move.w	d4,-(sp)
	move.l	d7,a0
	move.w	422(a0),d0
	add.w	d3,d0
	move.w	d0,-(sp)
	jsr	_out_text
	lea	12(sp),sp
L13:
	move.l	d7,a0
	cmp.w	#28672,514(a0)
	beq	L27
	moveq.l	#0,d3
L28:
	cmp.w	#4,d3
	beq	L27
	move.l	d7,a0
	move.w	518(a0),d0
	add.w	d3,d0
	tst.w	d0
	ble	L29
	moveq.l	#0,d4
L32:
	cmp.w	#4,d4
	beq	L29
	move.w	d3,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	428(a0),a0
	add.l	d1,a0
	moveq.l	#0,d0
	move.w	d4,d0
	move.b	0(a0,d0.l),d5
	ext.w	d5
	beq	L33
	move.w	d5,d0
	subq.w	#1,d0
	or.w	#256,d0
	move.w	d0,d5
	move.w	#49152,-(sp)
	move.l	d7,a0
	move.l	d7,a1
	move.w	420(a1),d0
	add.w	518(a0),d0
	add.w	d3,d0
	move.w	d0,-(sp)
	move.l	d7,a0
	move.l	d7,a1
	move.w	422(a1),d0
	add.w	516(a0),d0
	add.w	d4,d0
	move.w	d0,-(sp)
	move.w	#8192,-(sp)
	move.w	d5,-(sp)
	jsr	_put_tile
	lea	10(sp),sp
L33:
	addq.w	#1,d4
	bra	L32
L29:
	addq.w	#1,d3
	bra	L28
L27:
	move.l	d7,a0
	cmp.w	#20,422(a0)
	bcc	L36
	moveq.l	#0,d0
L37:
	ext.w	d0
	move.w	d0,d5
	move.l	d7,a0
	tst.w	606(a0)
	beq	L2
	moveq.l	#0,d3
L39:
	move.l	d7,a0
	cmp.w	606(a0),d3
	beq	L43
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	6(a0),d0
	add.w	#288,d0
	or.w	#8192,d0
	move.w	d0,-(sp)
	move.w	#2048,-(sp)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	(a0),-(sp)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	2(a0),-(sp)
	move.w	d3,d0
	lsl.w	#1,d0
	add.w	d5,d0
	addq.w	#1,d0
	move.w	d0,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	6(a0),d0
	add.w	#291,d0
	or.w	#8192,d0
	move.w	d0,-(sp)
	move.w	#2048,-(sp)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	(a0),-(sp)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	2(a0),d0
	add.w	#24,d0
	move.w	d0,-(sp)
	move.w	d3,d0
	lsl.w	#1,d0
	add.w	d5,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	move.w	4(a0),d0
	lsr.w	#3,d0
	move.w	d3,d1
	lsl.w	#3,d1
	moveq.l	#0,d2
	move.w	d1,d2
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d2,a0
	sub.w	d0,(a0)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	moveq.l	#0,d0
	move.w	4(a0),d0
	divu	#5,d0
	addq.w	#1,d0
	move.w	d3,d1
	lsl.w	#3,d1
	moveq.l	#0,d2
	move.w	d1,d2
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d2,a0
	add.w	d0,4(a0)
	move.w	d3,d0
	lsl.w	#3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	lea	574(a0),a0
	add.l	d1,a0
	cmp.w	#256,4(a0)
	bls	L40
	move.l	d7,a0
	subq.w	#1,606(a0)
L43:
	cmp.w	#4,d3
	beq	L45
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	clr.w	-(sp)
	move.w	d3,d0
	lsl.w	#1,d0
	add.w	d5,d0
	addq.w	#1,d0
	move.w	d0,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	clr.w	-(sp)
	move.w	d3,d0
	lsl.w	#1,d0
	add.w	d5,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	addq.w	#1,d3
	bra	L43
L45:
	move.w	d5,d0
	addq.w	#8,d0
	move.w	d0,-(sp)
	move.w	d5,d0
	addq.w	#1,d0
	move.w	d0,-(sp)
	jsr	_show_sprite
	addq.w	#4,sp
L2:
	movem.l	(sp)+,d3/d4/d5/d6/d7/a3/a4
	unlk	a6
	rts
L40:
	addq.w	#1,d3
	bra	L39
L36:
	moveq.l	#8,d0
	bra	L37
L3:
	move.l	d7,a0
	cmp.w	#28672,514(a0)
	beq	L13
	move.l	d7,a0
	move.w	516(a0),d0
	subq.w	#1,d0
	move.w	d0,-2(a6)
	move.l	d7,a0
	move.w	516(a0),d0
	addq.w	#5,d0
	move.w	d0,-4(a6)
	tst.w	-2(a6)
	bge	L15
	move.w	#0,-2(a6)
L15:
	move.l	d7,a0
	move.w	-4(a6),d0
	cmp.w	424(a0),d0
	bls	L16
	move.l	d7,a0
	move.w	424(a0),-4(a6)
L16:
	move.l	d7,a0
	move.w	518(a0),d0
	subq.w	#2,d0
	move.w	d0,-6(a6)
	move.l	d7,a0
	move.w	518(a0),d0
	addq.w	#5,d0
	move.w	d0,-8(a6)
	tst.w	-6(a6)
	bge	L17
	move.w	#0,-6(a6)
L17:
	move.l	d7,a0
	move.w	-8(a6),d0
	cmp.w	426(a0),d0
	bls	L18
	move.l	d7,a0
	move.w	426(a0),-8(a6)
L18:
	move.l	d7,a0
	move.w	422(a0),d0
	add.w	-2(a6),d0
	move.l	d7,a0
	move.w	420(a0),d1
	add.w	-6(a6),d1
	mulu	_extWIDTH,d1
	add.w	d1,d0
	lsl.w	#1,d0
	add.w	#49152,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d1,d6
	move.w	-6(a6),d3
L19:
	cmp.w	-8(a6),d3
	beq	L13
	move.l	#12582916,a3
	move.l	d6,d0
	and.l	#16383,d0
	add.l	#16384,d0
	moveq.l	#16,d1
	lsl.l	d1,d0
	move.l	d6,d1
	moveq.l	#14,d2
	lsr.l	d2,d1
	add.l	d1,d0
	move.l	d0,(a3)
	move.l	#12582912,a4
	move.w	-2(a6),d4
L22:
	cmp.w	-4(a6),d4
	beq	L24
	moveq.l	#14,d0
	mulu	d3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	move.l	d7,a0
	add.l	d1,a0
	moveq.l	#0,d0
	move.w	d4,d0
	move.b	0(a0,d0.l),d5
	ext.w	d5
	beq	L25
	move.w	d5,d0
	subq.w	#1,d0
	or.w	#256,d0
	or.w	#8192,d0
	move.w	d0,(a4)
L23:
	addq.w	#1,d4
	bra	L22
L25:
	move.w	#0,(a4)
	bra	L23
L24:
	move.w	_extWIDTH,d0
	add.w	_extWIDTH,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	d1,d6
	addq.w	#1,d3
	bra	L19
