	.bss
	.globl	_mission_pointer
	.comm	_mission_pointer,4
	.globl	_mishead
	.comm	_mishead,4
	.globl	_mission_opt
	.comm	_mission_opt,14
	.globl	_mission_number
	.comm	_mission_number,2
	.globl	_mission_timer
	.comm	_mission_timer,2
	.globl	_mission_sub_timer
	.comm	_mission_sub_timer,2
	.globl	_mission_has_meta
	.comm	_mission_has_meta,2
	.globl	_mission_lives
	.comm	_mission_lives,2
	.text
	.globl	_load_next_mission
_load_next_mission:
	link	a6,#0
	movem.l	d3-d4,-(sp)
	cmp.l	#853721,_mission_pointer
	bcs	L3
L2:
	movem.l	(sp)+,d3-d4
	unlk	a6
	rts
L3:
	move.l	_mission_pointer,a0
	move.l	a0,_mishead
	clr.w	d0
	move.b	(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,2(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	1(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,4(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	2(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,6(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	3(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,8(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	10(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,10(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	11(a0),d0
	move.l	_curr_plf_opt,a0
	move.w	d0,12(a0)
	move.l	_mishead,a0
	clr.w	d0
	move.b	4(a0),d0
	move.w	d0,_mission_timer
	move.w	#60,_mission_sub_timer
	move.l	#_playfield1,-(sp)
	jsr	_init_playfield
	addq.w	#4,sp
	move.w	#0,_mission_has_meta
	moveq.l	#0,d3
L4:
	cmp.w	#4,d3
	beq	L6
	moveq.l	#0,d0
	move.w	d3,d0
	move.l	_mishead,a0
	addq	#6,a0
	add.l	d0,a0
	clr.w	d0
	move.b	(a0),d0
	move.w	d3,d1
	lsl.w	#1,d1
	moveq.l	#0,d2
	move.w	d1,d2
	add.l	#_playfield1+542,d2
	move.l	d2,a0
	move.w	d0,(a0)
	moveq.l	#0,d0
	move.w	d3,d0
	move.l	_mishead,a0
	addq	#6,a0
	add.l	d0,a0
	tst.b	(a0)
	beq	L5
	move.w	#1,_mission_has_meta
L5:
	addq.w	#1,d3
	bra	L4
L6:
	add.l	#12,_mission_pointer
	moveq.l	#0,d3
L8:
	move.l	_mishead,a0
	clr.w	d0
	move.b	1(a0),d0
	cmp.w	d0,d3
	beq	L10
	moveq.l	#0,d4
L11:
	move.l	_mishead,a0
	clr.w	d0
	move.b	(a0),d0
	cmp.w	d0,d4
	beq	L9
	move.l	_mission_pointer,a0
	moveq.l	#14,d0
	mulu	d3,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#_playfield1,d1
	move.l	d1,a1
	moveq.l	#0,d0
	move.w	d4,d0
	add.l	d0,a1
	move.b	(a0),(a1)
	addq.l	#1,_mission_pointer
	addq.w	#1,d4
	bra	L11
L9:
	addq.w	#1,d3
	bra	L8
L10:
	move.l	#_playfield1,-(sp)
	jsr	_count_special_blocks
	move.w	d0,_playfield1+562
	move.l	#_playfield1,(sp)
	jsr	_check_plf_meta
	addq.w	#4,sp
	move.w	d0,_playfield1+564
	addq.w	#1,_mission_number
	bra	L2
	.text
	.globl	_mission_clear
_mission_clear:
	link	a6,#-2
	move.l	_mishead,a0
	tst.b	4(a0)
	beq	L17
	tst.w	_mission_timer
	beq	L17
	clr.w	d0
L16:
	unlk	a6
	rts
L17:
	move.l	_mishead,a0
	tst.b	5(a0)
	beq	L18
	tst.w	_playfield1+562
	beq	L18
	clr.w	d0
	bra	L16
L18:
	tst.w	_mission_has_meta
	beq	L19
	tst.w	_playfield1+564
	bne	L19
	clr.w	d0
	bra	L16
L19:
	moveq.l	#1,d0
	bra	L16
	.text
	.globl	_mission_briefing
_mission_briefing:
	link	a6,#0
	movem.l	d3-d4,-(sp)
	clr.w	-(sp)
	move.w	#49152,-(sp)
	move.w	#28,-(sp)
	move.w	#40,-(sp)
	move.w	#28,-(sp)
	clr.w	-(sp)
	jsr	_fill_bkg_rect
	lea	12(sp),sp
	moveq.l	#1,d3
L23:
	cmp.w	#81,d3
	beq	L25
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	move.w	#-32,-(sp)
	move.w	d3,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	addq.w	#1,d3
	bra	L23
L25:
	move.w	#80,-(sp)
	move.w	#1,-(sp)
	jsr	_show_sprite
	addq.w	#4,sp
	moveq.l	#0,d3
L26:
	cmp.w	#244,d3
	beq	L28
	jsr	_wait_sync
	clr.w	-(sp)
	move.w	d3,-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	jsr	_generate_sound
	addq.w	#4,d3
	bra	L26
L28:
	clr.w	-(sp)
	move.w	#-244,-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	clr.w	-(sp)
	move.w	#49152,-(sp)
	move.w	#28,-(sp)
	move.w	#40,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_fill_bkg_rect
	lea	12(sp),sp
	move.l	#_pal_black,-(sp)
	clr.w	-(sp)
	jsr	_set_colors
	addq.w	#6,sp
	moveq.l	#41,d3
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	tst.w	_curr_language
	beq	L29
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	move.l	#L30,-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	add.w	(sp)+,d0
	move.w	d0,d4
L31:
	move.w	_mission_number,-(sp)
	move.w	#3,-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	move.w	d4,-(sp)
	jsr	_out_uint
	lea	12(sp),sp
	addq.w	#2,d3
	tst.w	_mission_has_meta
	beq	L33
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	4(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	4(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	addq.w	#1,d3
L33:
	move.l	_mishead,a0
	tst.b	5(a0)
	beq	L34
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	8(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	8(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	addq.w	#1,d3
L34:
	move.l	_mishead,a0
	tst.b	4(a0)
	beq	L35
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	12(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	12(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	tst.w	_curr_language
	beq	L36
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	12(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	move.l	#L37,-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	add.w	(sp)+,d0
	move.w	d0,d4
L38:
	move.l	_mishead,a0
	clr.w	d0
	move.b	4(a0),d0
	move.w	d0,-(sp)
	move.w	#3,-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,-(sp)
	move.w	d4,-(sp)
	jsr	_out_uint
	lea	12(sp),sp
	addq.w	#1,d3
L35:
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	16(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	16(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.w	_mission_lives,-(sp)
	move.w	#1,-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	16(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_uint
	lea	12(sp),sp
	moveq.l	#120,d4
L40:
	tst.w	d4
	beq	L42
	jsr	_wait_sync
	jsr	_generate_sound
	subq.w	#1,d4
	bra	L40
L42:
	clr.w	-(sp)
	move.w	#49152,-(sp)
	move.w	#1,-(sp)
	move.w	#40,-(sp)
	move.w	d3,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	clr.w	-(sp)
	jsr	_fill_bkg_rect
	lea	12(sp),sp
	move.w	_curr_language,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__press_start,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,d0
	addq.w	#2,d0
	move.w	d0,-(sp)
	move.w	_curr_language,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__press_start,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.l	_mishead,a0
	tst.b	4(a0)
	beq	L43
	moveq.l	#0,d3
L44:
	move.w	d3,-(sp)
	jsr	_draw_mission_bkg
	addq.w	#2,sp
	moveq.l	#40,d0
	sub.w	_playfield1+424,d0
	sub.w	#20,d0
	lsr.w	#1,d0
	move.w	d0,_playfield1+422
	move.w	#20,_plf_display_width
	move.w	#9,_plf_display_height
	jsr	_init_tiles
	move.l	#_playfield1,-(sp)
	jsr	_draw_playfield
	addq.w	#4,sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollh
	addq.w	#4,sp
	clr.w	-(sp)
	move.w	#-244,-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	jsr	_wait_sync
L47:
	jsr	_read_joypad1
	move.w	d0,-(sp)
	jsr	_read_joypad2
	or.w	(sp)+,d0
	and.w	#128,d0
	bne	L49
	jsr	_wait_sync
	jsr	_generate_sound
	bra	L47
L49:
	jsr	_read_joypad1
	move.w	d0,-(sp)
	jsr	_read_joypad2
	or.w	(sp)+,d0
	and.w	#128,d0
	beq	L50
	jsr	_wait_sync
	jsr	_generate_sound
	bra	L49
L50:
	move.w	#244,d3
L51:
	tst.w	d3
	beq	L53
	jsr	_wait_sync
	clr.w	-(sp)
	move.w	d3,-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	jsr	_generate_sound
	subq.w	#4,d3
	bra	L51
L53:
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollv
	addq.w	#4,sp
	movem.l	(sp)+,d3-d4
	unlk	a6
	rts
L43:
	move.l	_mishead,a0
	tst.b	5(a0)
	beq	L45
	moveq.l	#1,d3
	bra	L44
L45:
	moveq.l	#2,d3
	bra	L44
L36:
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	12(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	move.l	#L39,-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	add.w	(sp)+,d0
	move.w	d0,d4
	bra	L38
L29:
	moveq.l	#20,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_briefing,d1
	move.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	move.l	#L32,-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	add.w	(sp)+,d0
	move.w	d0,d4
	bra	L31
	.text
	.globl	_mission_ending
_mission_ending:
	link	a6,#0
	movem.l	d3-d4,-(sp)
	clr.w	-(sp)
	move.w	#49152,-(sp)
	move.w	#56,-(sp)
	move.w	#40,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_fill_bkg_rect
	lea	12(sp),sp
	moveq.l	#1,d3
L57:
	cmp.w	#81,d3
	beq	L59
	clr.w	-(sp)
	clr.w	-(sp)
	move.w	#-32,-(sp)
	move.w	#-32,-(sp)
	move.w	d3,-(sp)
	jsr	_def_sprite
	lea	10(sp),sp
	addq.w	#1,d3
	bra	L57
L59:
	move.w	#80,-(sp)
	move.w	#1,-(sp)
	jsr	_show_sprite
	addq.w	#4,sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollh
	addq.w	#4,sp
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_scrollv
	move.l	#_pal_black,(sp)
	clr.w	-(sp)
	jsr	_set_colors
	addq.w	#6,sp
	move.w	#3,-(sp)
	jsr	_draw_mission_bkg
	addq.w	#2,sp
	moveq.l	#120,d4
L60:
	tst.w	d4
	beq	L62
	jsr	_wait_sync
	jsr	_generate_sound
	subq.w	#1,d4
	bra	L60
L62:
	moveq.l	#0,d3
L63:
	cmp.w	#4,d3
	beq	L65
	move.w	d3,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d2
	move.w	d0,d2
	add.l	#__mission_ending,d2
	move.l	d2,a0
	add.l	d1,a0
	move.l	(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	d3,d0
	add.w	#11,d0
	move.w	d0,-(sp)
	move.w	d3,d0
	lsl.w	#2,d0
	moveq.l	#0,d1
	move.w	d0,d1
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d2
	move.w	d0,d2
	add.l	#__mission_ending,d2
	move.l	d2,a0
	add.l	d1,a0
	move.l	(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	addq.w	#1,d3
	bra	L63
L65:
	move.w	_playfield1+556,d4
	moveq.l	#3,d3
L66:
	tst.w	d4
	beq	L67
	subq.w	#1,d3
	moveq.l	#0,d0
	move.w	d4,d0
	divu	#100,d0
	move.w	d0,d4
	bra	L66
L67:
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_ending,d1
	move.l	d1,a0
	move.l	16(a0),-(sp)
	jsr	_strlen2
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	sub.w	d3,d1
	move.w	d1,d3
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_ending,d1
	move.l	d1,a0
	move.l	16(a0),(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	#15,-(sp)
	move.w	d3,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.l	_playfield1+554,-(sp)
	move.w	#7,-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	#15,-(sp)
	move.w	d3,-(sp)
	jsr	_out_ulong
	lea	14(sp),sp
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_ending,d1
	move.l	d1,a0
	move.l	20(a0),-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	#16,-(sp)
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_ending,d1
	move.l	d1,a0
	move.l	20(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.w	_mission_lives,-(sp)
	move.w	#1,-(sp)
	move.w	#49152,-(sp)
	move.w	#2,-(sp)
	move.w	#16,-(sp)
	moveq.l	#24,d0
	mulu	_curr_language,d0
	moveq.l	#0,d1
	move.w	d0,d1
	add.l	#__mission_ending,d1
	move.l	d1,a0
	move.l	20(a0),-(sp)
	jsr	_strlen2
	addq.w	#4,sp
	moveq.l	#40,d1
	sub.w	d0,d1
	lsr.w	#1,d1
	move.w	d1,-(sp)
	jsr	_out_uint
	lea	12(sp),sp
	move.w	#600,d4
L68:
	tst.w	d4
	beq	L56
	jsr	_wait_sync
	jsr	_generate_sound
	subq.w	#1,d4
	bra	L68
L56:
	movem.l	(sp)+,d3-d4
	unlk	a6
	rts
	.data
L76:	.dc.b	$55,$6c,$74,$69,$6d,$61,$74,$65,$20,$74,$65
	.dc.b	$74,$72,$69,$73,$20,$62,$65,$74,$61,$20,$76,$65,$72,$73,$69,$6f
	.dc.b	$6e
	.dc.b	0
L39:	.dc.b	$53,$6f,$62,$72,$65,$76,$69,$76,$61,$20
	.dc.b	0
L37:	.dc.b	$53,$75,$72,$76,$69,$76,$65,$20
	.dc.b	0
L32:	.dc.b	$4d,$69,$73,$73,$46,$6f,$20
	.dc.b	0
L30:	.dc.b	$4d,$69,$73,$73,$69,$6f,$6e,$20
	.dc.b	0
	.text
	.globl	_play_mission
_play_mission:
	link	a6,#-6
	move.l	#845935,_mission_pointer
	move.l	#_mission_opt,_curr_plf_opt
	move.w	#0,_mission_number
	move.w	#0,_playfield1+566
	move.w	#5,_mission_lives
	move.l	#0,-6(a6)
L74:
	tst.w	_mission_lives
	beq	L75
	cmp.l	#853721,_mission_pointer
	bcc	L75
	jsr	_load_next_mission
	jsr	_mission_briefing
	jsr	_init_joypad
	move.l	#L76,-(sp)
	move.w	#49152,-(sp)
	move.w	#1,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_out_text
	lea	12(sp),sp
	move.l	-6(a6),_playfield1+554
	move.w	#0,-2(a6)
L77:
	cmp.w	#1,_playfield1+566
	beq	L78
	jsr	_mission_clear
	tst.w	d0
	bne	L78
	tst.w	-2(a6)
	bne	L78
	jsr	_read_joypad1
	move.w	d0,-(sp)
	move.l	#_playfield1,-(sp)
	jsr	_handle_playfield
	addq.w	#6,sp
	jsr	_generate_sound
	clr.w	-(sp)
	jsr	_redraw
	addq.w	#2,sp
	jsr	_read_joypad1
	and.w	#240,d0
	cmp.w	#240,d0
	bne	L79
	move.w	#1,-2(a6)
L80:
	jsr	_read_joypad1
	and.w	#128,d0
	bne	L80
L82:
	subq.w	#1,_mission_sub_timer
	bne	L77
	tst.w	_mission_timer
	beq	L86
	subq.w	#1,_mission_timer
	move.b	#1,_playfield1+568
L86:
	move.w	#60,_mission_sub_timer
	bra	L77
L79:
	jsr	_read_joypad1
	move.w	d0,-(sp)
	jsr	_read_joypad2
	or.w	(sp)+,d0
	and.w	#128,d0
	beq	L82
	jsr	_pause_menu
	cmp.w	#1,d0
	bne	L82
	move.w	#28672,_playfield1+514
	move.l	#_playfield1,-(sp)
	jsr	_prepare_gameover
	addq.w	#4,sp
	move.w	#1,_mission_lives
	bra	L82
L78:
	move.l	_playfield1+554,-6(a6)
	cmp.w	#1,_playfield1+566
	bne	L74
	subq.w	#1,_mission_lives
	bra	L74
L75:
	tst.w	_mission_lives
	beq	L88
	jsr	_mission_ending
L88:
	clr.w	-(sp)
	move.w	#49152,-(sp)
	move.w	#56,-(sp)
	move.w	#40,-(sp)
	clr.w	-(sp)
	clr.w	-(sp)
	jsr	_fill_bkg_rect
	unlk	a6
	rts
